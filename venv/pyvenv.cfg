# app.py
import streamlit as st
import streamlit.components.v1 as components
from pathlib import Path

# 1. 페이지 설정
st.set_page_config(layout="wide", page_title="The Days We Kept")

# 2. 이 스크립트(app.py)가 있는 디렉터리를 기준 경로로 잡습니다.
BASE_DIR = Path(__file__).parent

# 3. 실제 파일 경로
html_path       = BASE_DIR / "index.html"
style_css_path  = BASE_DIR / "style.css"
vendor_css_path = BASE_DIR / "css"  / "vendor.css"
jquery_js_path  = BASE_DIR / "js"   / "jquery-1.11.0.min.js"
plugins_js_path = BASE_DIR / "js"   / "plugins.js"
script_js_path  = BASE_DIR / "js"   / "script.js"

# 4. 파일 읽기 헬퍼
def read_file(path: Path) -> str:
    if not path.exists():
        st.error(f"❌ 파일을 찾을 수 없습니다: {path}")
        st.stop()
    return path.read_text(encoding="utf-8")

# 5. 각 리소스 로드
html_body   = read_file(html_path)
style_css   = read_file(style_css_path)
vendor_css  = read_file(vendor_css_path)
jquery_js   = read_file(jquery_js_path)
plugins_js  = read_file(plugins_js_path)
script_js   = read_file(script_js_path)

# 6. HTML에 CSS·JS 인라인 삽입
full_html = (
    html_body
      .replace(
         "</head>",
         f"<style>\n{vendor_css}\n{style_css}\n</style>\n</head>"
      )
      .replace(
         "</body>",
         f"<script>\n{jquery_js}\n{plugins_js}\n{script_js}\n</script>\n</body>"
      )
)

# 7. Streamlit에 렌더링
components.html(
    full_html,
    height=800,
    scrolling=True
)